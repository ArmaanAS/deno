// deno-fmt-ignore-file
// deno-lint-ignore-file

// Copyright Joyent and Node contributors. All rights reserved. MIT license.
// Taken from Node 18.12.1
// This file is automatically generated by `tools/node_compat/setup.ts`. Do not modify this file manually.

'use strict';

require('../common');
const common = require('../common');
const dns = require('dns');
const dnsPromises = dns.promises;
const { addresses } = require('../common/internet');
const assert = require('assert');

assert.rejects(
  dnsPromises.lookup(addresses.NOT_FOUND, {
    hints: 0,
    family: 0,
<<<<<<< HEAD
    all: false,
  }),
  {
    code: 'ENOTFOUND',
    message: `getaddrinfo ENOTFOUND ${addresses.NOT_FOUND}`,
  },
=======
    all: false
  }),
  {
    code: 'ENOTFOUND',
    message: `getaddrinfo ENOTFOUND ${addresses.NOT_FOUND}`
  }
>>>>>>> 8c07f52a7 (1.38.4 (#21398))
);

assert.rejects(
  dnsPromises.lookup(addresses.NOT_FOUND, {
    hints: 0,
    family: 0,
<<<<<<< HEAD
    all: true,
  }),
  {
    code: 'ENOTFOUND',
    message: `getaddrinfo ENOTFOUND ${addresses.NOT_FOUND}`,
  },
=======
    all: true
  }),
  {
    code: 'ENOTFOUND',
    message: `getaddrinfo ENOTFOUND ${addresses.NOT_FOUND}`
  }
>>>>>>> 8c07f52a7 (1.38.4 (#21398))
);

dns.lookup(addresses.NOT_FOUND, {
  hints: 0,
  family: 0,
<<<<<<< HEAD
  all: true,
=======
  all: true
>>>>>>> 8c07f52a7 (1.38.4 (#21398))
}, common.mustCall((error) => {
  assert.strictEqual(error.code, 'ENOTFOUND');
  assert.strictEqual(
    error.message,
<<<<<<< HEAD
    `getaddrinfo ENOTFOUND ${addresses.NOT_FOUND}`,
=======
    `getaddrinfo ENOTFOUND ${addresses.NOT_FOUND}`
>>>>>>> 8c07f52a7 (1.38.4 (#21398))
  );
  assert.strictEqual(error.syscall, 'getaddrinfo');
  assert.strictEqual(error.hostname, addresses.NOT_FOUND);
}));

assert.throws(
  () => dnsPromises.lookup(addresses.NOT_FOUND, {
    family: 'ipv4',
<<<<<<< HEAD
    all: 'all',
  }),
  { code: 'ERR_INVALID_ARG_VALUE' },
=======
    all: 'all'
  }),
  { code: 'ERR_INVALID_ARG_VALUE' }
>>>>>>> 8c07f52a7 (1.38.4 (#21398))
);
